(()=>{const e=e=>{chrome.scripting.executeScript({target:{tabId:e},func:async()=>{const e=document.querySelector(".fixed-button");if(e)return void e.remove();const{timerStart:t}=await chrome.storage.local.get(["timerStart"]),r="\n      top: 50vh;\n      left: 95vw;\n      z-index: 999;\n      border: none;\n      position:fixed;\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      ",o=`${r}${t?"background-color: green;box-shadow: 0px 0px 10px 4px green;":"background-color: red;box-shadow: 0px 0px 10px 4px red;"}`,a=document.createElement("button");a.setAttribute("class","fixed-button"),a.setAttribute("style",o);let n=!1;a.addEventListener("click",(e=>{"green"===e.target.style.backgroundColor?(n=!1,a.setAttribute("style",`${r}background-color: red;box-shadow: 0px 0px 10px 4px red;`)):(n=!0,a.setAttribute("style",`${r}background-color: green;box-shadow: 0px 0px 10px 4px green;`)),t||!n?chrome.storage.local.set({timerStart:!1}):chrome.storage.local.set({timerStart:!0})})),document.body.appendChild(a)}})},t=e=>{chrome.scripting.executeScript({target:{tabId:e},func:()=>{const e=document.querySelector(".fixed-button");e&&e.remove()}})},r=(r,o)=>{o?chrome.storage.local.set({showStartButton:!0},(()=>{e(r)})):chrome.storage.local.get(["showStartButton"],(({showStartButton:o})=>{o?e(r):t(r)}))};(async()=>{const e=await chrome.storage.local.get(["timerStart","delay"]);let t=null,o=e.delay||3e4,a=e.timerStart,n=null;chrome.tabs.onActivated.addListener((({tabId:e})=>{n=e,r(e)})),chrome.tabs.onUpdated.addListener((e=>{n=e,r(e)})),chrome.commands.onCommand.addListener((e=>{r(n,e)}));const c=()=>{a&&o&&!t?t=setInterval((()=>{chrome.tabs.reload()}),o):(clearInterval(t),t=null)};chrome.storage.onChanged.addListener((e=>{e.timerStart&&e.timerStart.newValue!==a&&(a=e.timerStart.newValue),e.delay&&e.delay.newValue!==o&&(o=e.delay.newValue),c()})),c()})()})();
//# sourceMappingURL=background.js.map
